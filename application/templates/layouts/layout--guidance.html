{% extends "layouts/layout.html" %}
{% from "components/sub-navigation/macro.jinja" import appSubNavigation %}
{% block pageTitle %}{{ pageData.pageTitle }}{% endblock %}

{%- block breadcrumbs -%}
  {{- govukBreadcrumbs({ 'items': pageData.breadcrumbs }) -}}
{%- endblock -%}

{% block content %}

  {% if pageData.fullPageTitle %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <h1 class="govuk-heading-xl">{{ pageData.pageTitle }}</h1>
    </div>
  </div>
  {% endif %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-third" id="content_secondary">
      <a href="#content_primary" class="govuk-visually-hidden">Skip guidance navigation</a>
      {% block content_secondary %}

        {% set themes = [
          'Guidance for Local Planning Authorities',
          'Data specification guidance',
          'Other guidance'
        ] %}

        {% set sectionPath = '/guidance/' %}

        {{
          appSubNavigation({
          'hideChildrenWhenParentIsCurrent': true,
          'visuallyHiddenTitle': 'Guidance navigation',
          'sort': false,
          'links': [
            {
              'text': 'Guidance home',
              'href': sectionPath + 'index.html',
              'theme': themes[0],
              'current': true if pageData.name == 'home' else false,
            },
            {
              'text': 'Introduction',
              'href': sectionPath + 'introduction.html',
              'theme': themes[0],
              'current': true if pageData.name == 'introduction' else false,
            },
            {
              'text': 'How to provide data',
              'theme': themes[0],
              'href': sectionPath + 'how-to-provide-data.html',
              'current': true if pageData.name == 'how-to-provide-data' else false,
            },
            {
              'text': 'Data specifications guidance',
              'theme': themes[0],
              'href': sectionPath + 'specifications/',
              'current': true if pageData.name == 'specifications' else false,
              'parent': true,
              'children': [
                {
                  'text': "Conservation area data",
                  'href': sectionPath + 'specifications/conservation-area.html',
                  'child': true,
                  'current': true if pageData.name == 'conservation-area' else false,
                },
                {
                  'text': "Listed building data",
                  'href': sectionPath + 'specifications/listed-building.html',
                  'child': true,
                  'current': true if pageData.name == 'listed-building' else false,
                },
                {
                  'text': "Article 4 Direction data",
                  'href': sectionPath + 'specifications/article-4-direction.html',
                  'child': true,
                  'current': true if pageData.name == 'article-4-direction' else false,
                },
                {
                  'text': "Tree preservation order data",
                  'href': sectionPath + 'specifications/tree-preservation-order.html',
                  'child': true,
                  'current': true if pageData.name == 'tree-preservation-order' else false,
                }
              ]
            },
            {
              'text': 'Technical specifications',
              'theme': 'Related links',
              'href': 'https://digital-land.github.io/specification/specification/',
              'current': true if pageData.name == 'technical-specifications' else false,
            }
          ]
        })
        }}
      {% endblock %}
    </div>
    <!-- /.govuk-grid-column-one-third -->
    <div class="govuk-grid-column-two-thirds" id="content_primary">

      {% if not pageData.fullPageTitle %}
        {% if pageData.pageTitle %}
          <h1 class="govuk-heading-xl">{{ pageData.pageTitle }}</h1>
        {% endif %}
      {% endif %}

      <div class="app-prose">
        {% block content_primary %}
        {% endblock %}
      </div>
      <!-- /.app-prose -->
    </div>
    <!-- /.govuk-grid-column-two-thirds -->
  </div>
  <!-- /.govuk-grid-row -->
  {{ pageData | debug | safe }}
{% endblock %}
